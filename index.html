<!DOCTYPE html>
<html>
  <head>
    <title>
      Payment Method Identifiers
    </title>
    <meta charset='utf-8'>
    <script src='https://www.w3.org/Tools/respec/respec-w3c-common' async
    class='remove'></script>
    <script class='remove'>
    var respecConfig = {
      editors: [{
        name: "Adrian Bateman",
        company: "Microsoft Corporation",
        w3cid: 42763,
      }, {
        name: "Zach Koch",
        company: "Google",
        w3cid: 76588,
      }, {
        name: "Roy McElmurry",
        company: "Facebook",
        w3cid: 88345,
      }, {
        name: "Marcos C√°ceres",
        company: "Mozilla",
        w3cid: 39125,
      }],
      crEnd: "2017-10-31",
      github: "https://github.com/w3c/payment-method-id",
      implementationReportURI: "https://w3c.github.io/payment-method-id/reports/implementation.html",
      license: "w3c-software-doc",
      previousMaturity: "FPWD",
      previousPublishDate: "2016-04-21",
      specStatus: "ED",
      testSuiteURI: "https://w3c-test.org/payment-method-id/",
      wg: "Web Payments Working Group",
      wgPatentURI: "https://www.w3.org/2004/01/pp-impl/83744/status",
      wgURI: "https://www.w3.org/Payments/WG/",
    };
    </script>
  </head>
  <body>
    <section id='abstract'>
      <p>
        This specification defines payment method identifiers and how they are
        validated, and, where applicable, minted and formally registered with
        the <a href="https://w3.org">W3C</a>. Other specifications (e.g.,
        <a data-cite="payment-request">Payment Request</a>) make use of these
        identifiers to facilitate monetary transactions on the web platform.
      </p>
    </section>
    <section id='sotd'>
      <p class="note">
        Please file any issues with this specification in the <a href=
        "https://github.com/w3c/payment-method-id/issues">payment method
        identifiers repository</a> on GitHub.
      </p>
    </section>
    <section>
      <h2>
        Payment method identifiers
      </h2>
      <p>
        A <dfn>payment method identifier</dfn> is either a:
      </p>
      <ul>
        <li>
          <a>URL-based payment method identifier</a>.
        </li>
        <li>
          <a>standardized payment method identifier</a>.
        </li>
      </ul>
    </section>
    <section>
      <h2>
        URL-based payment method identifiers
      </h2>
      <p>
        A <dfn data-lt="URL-based payment method identifiers">URL-based payment
        method identifier</dfn> is a <dfn data-cite=
        "!URL#concept-URL">URL</dfn> that is valid as per the steps to
        <a>validate a URL-based payment method identifier</a>.
      </p>
      <div class="note">
        <p>
          Developers wanting to use a URL-based payment method identifier for a
          third party payment handler are encouraged to read the <a href=
          "https://w3c.github.io/webpayments/proposals/method-practice/">Payment
          Method Best Practice</a> document.
        </p>
      </div>
      <section>
        <h2>
          Validation
        </h2>
        <p>
          The steps to <dfn data-lt="validate|valid">validate a URL-based
          payment method identifier</dfn> are given by the following algorithm.
          The algorithm takes a <var>url</var> <a data-cite=
          "!URL#concept-url">URL</a> as input and returns true if the URL is
          valid:
        </p>
        <ol class="algorithm">
          <li>If <var>url</var>'s <a data-cite=
          "!URL#concept-url-scheme">scheme</a> is not "https", return false.
          </li>
          <li>If <var>url</var>'s <a data-cite=
          "!URL#concept-url-username">username</a> or <a data-cite=
          "!URL#concept-url-password">password</a> is not the empty string,
          return false.
          </li>
          <li>Otherwise, return true.
          </li>
        </ol>
        <pre class="example" title="non-conforming PMIs">
          const good = [
            {
              supportedMethods: "https://example.com/pay",
            },
            {
              supportedMethods: "https://example.com/pay?version=1",
            },
            {
              supportedMethods: "https://example.com/pay/version/1",
            },
          ];

          const bad = [
            {
              // ‚ùå Uses http://, a username, and a password.
              supportedMethods: "http://username:password@example.com/pay",
            },
            {
              // ‚ùå Uses unknown URI scheme.
              supportedMethods: "unknown://example.com/pay",
            },
          ];
        </pre>
      </section>
      <section>
        <h2>
          Comparison
        </h2>
        <p>
          User agents MUST perform comparisons of <a>URL-based payment method
          identifiers</a> using <a data-cite=
          "!URL#concept-url-equals">equals</a>. [[!URL]]
        </p>
      </section>
    </section>
    <section>
      <h2>
        Standardized payment method identifiers
      </h2>
      <p>
        A <dfn data-lt="standardized payment method identifiers">standardized
        payment method identifier</dfn> is a string that represents a
        <a>standardized payment method</a>.
      </p>
      <p>
        User agents MAY support zero or more <a>standardized payment method
        identifiers</a> listed in section <a href="#registry"></a>.
      </p>
      <section>
        <h2>
          Validity
        </h2>
        <p>
          The steps to <dfn>validate a standardized payment method
          identifier</dfn> are given by the following algorithm. The algorithm
          takes a <var>string</var> as input and returns true if the identifier
          is valid:
        </p>
        <ol class="algorithm">
          <li>Return true if <var>string</var> contains only [[!UNICODE]] code
          points:
            <ol>
              <li>In the range U+0061-U+007A ("Latin Small Letter A" to "Latin
              Small Letter Z")
              </li>
              <li>In the range U+0030-U+0039 ("Digit Zero" to "Digit Nine").
              </li>
              <li>Zero or more U+002D HYPHEN-MINUS (-).
              </li>
            </ol>
          </li>
          <li>Otherwise, return false.
          </li>
        </ol>
        <p class="note">
          When minting a new <a>standardized payment method identifier</a> for
          the purpose of standardization, be sure that it conforms to the
          following regular expression: <code>[a-z0-9-]+</code>.
        </p>
        <p>
          User agents MUST NOT enforce validity or well-formedness of
          <a>standardized payment method identifiers</a>.
        </p>
        <div class="note">
          <p>
            When used in an API, the following method identifiers are all
            ignored by the user agent. Some user agents might inform developers
            that identifiers are invalid to help them fix issues.
          </p>
          <pre class="example" title="Conforming and non-conforming PMIs">
            const good = [
              {
                supportedMethods: "basic-card",
              },
            ];

            const bad = [
              {
                // ‚ùå Contains Unicode character outside the valid ranges.
                supportedMethods: "üí≥-card",
              },
              {
                // ‚ùå Contains uppercase characters.
                supportedMethods: "Basic-Card",
              },
              {
                // ‚ùå Contains Unicode characters outside the valid ranges.
                supportedMethods: "¬°basic-*-card!",
              },
            ];
          </pre>
        </div>
      </section>
      <section>
        <h2>
          Comparison
        </h2>
        <p>
          For <a>standardized payment method identifiers</a>, user agents MUST
          compare strings in a <a data-cite=
          "!HTML#case-sensitive">case-sensitive</a> manner (code point for code
          point).
        </p>
      </section>
    </section>
    <section class="informative">
      <h3 id="registry">
        Registry of standardized payment methods
      </h3>
      <p>
        A <dfn>standardized payment method</dfn> is a payment method that has
        undergone standardization at the W3C, and is listed in this registry.
      </p>
      <p>
        The Working Group has minted the following <a>standardized payment
        method identifiers</a>:
      </p>
      <dl>
        <dt>
          "<code>basic-card</code>"
        </dt>
        <dd>
          The <cite><a data-cite="payment-method-basic-card">Basic Card
          Payment</a></cite> specification.
        </dd>
      </dl>
    </section>
    <section>
      <h2>
        Privacy and security consideration
      </h2>
      <p>
        There are no known privacy or security concerns to be taken into
        considerations at this time.
      </p>
    </section>
  </body>
</html>
